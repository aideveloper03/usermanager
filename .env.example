# =============================================================================
# N8N ORCHESTRATION GATEWAY - ENVIRONMENT CONFIGURATION
# =============================================================================
# Copy this file to .env and fill in your values

# -----------------------------------------------------------------------------
# APPLICATION SETTINGS
# -----------------------------------------------------------------------------
APP_NAME="N8N Orchestration Gateway"
APP_VERSION="1.0.0"
DEBUG=false
ENVIRONMENT=production

# Server Configuration
HOST=0.0.0.0
PORT=8000
WORKERS=4

# -----------------------------------------------------------------------------
# SUPABASE CONFIGURATION
# -----------------------------------------------------------------------------
# Get these from your Supabase project settings
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key

# Database connection (for direct PostgreSQL access if needed)
DATABASE_URL=postgresql://postgres:password@db.your-project.supabase.co:5432/postgres

# -----------------------------------------------------------------------------
# CLERK AUTHENTICATION
# -----------------------------------------------------------------------------
# Get these from your Clerk dashboard
CLERK_SECRET_KEY=sk_test_xxxxxxxxxxxxx
CLERK_PUBLISHABLE_KEY=pk_test_xxxxxxxxxxxxx
CLERK_JWT_ISSUER=https://your-clerk-instance.clerk.accounts.dev
CLERK_JWKS_URL=https://your-clerk-instance.clerk.accounts.dev/.well-known/jwks.json

# Clerk Webhook Secret (for user sync)
# CLERK_WEBHOOK_SECRET=whsec_xxxxx

# -----------------------------------------------------------------------------
# N8N CONFIGURATION
# -----------------------------------------------------------------------------
# Your private n8n instance URL
N8N_BASE_URL=https://your-n8n-instance.example.com
N8N_WEBHOOK_PATH=/webhook

# High-entropy secret for internal auth (generate with: openssl rand -hex 32)
N8N_INTERNAL_AUTH_SECRET=your-very-long-random-secret-here-minimum-64-characters

# n8n API key (required for dynamic credential injection)
# Create in n8n: Settings → API → Create API Key
N8N_API_KEY=

# Enable dynamic credential injection via n8n REST API
# Requires N8N_API_KEY to be set
N8N_USE_DYNAMIC_CREDENTIALS=false

# Request timeout for n8n calls (in seconds)
N8N_REQUEST_TIMEOUT=300

# -----------------------------------------------------------------------------
# REDIS CONFIGURATION (for rate limiting)
# -----------------------------------------------------------------------------
REDIS_URL=redis://localhost:6379/0
REDIS_PASSWORD=
REDIS_SSL=false

# -----------------------------------------------------------------------------
# RATE LIMITING
# -----------------------------------------------------------------------------
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_PERIOD=60

# -----------------------------------------------------------------------------
# SECURITY SETTINGS
# -----------------------------------------------------------------------------
# HMAC signature validity window (in seconds)
HMAC_TIMESTAMP_TOLERANCE=300

# Allowed origins for CORS (comma-separated)
# Example: https://your-frontend.com,https://app.your-domain.com
CORS_ORIGINS=

# Trusted proxy IPs (comma-separated, for accurate client IP detection)
TRUSTED_PROXIES=

# -----------------------------------------------------------------------------
# LOGGING
# -----------------------------------------------------------------------------
LOG_LEVEL=INFO
LOG_FORMAT=json

# -----------------------------------------------------------------------------
# FEATURE FLAGS
# -----------------------------------------------------------------------------
ENABLE_RATE_LIMITING=true
ENABLE_HMAC_VALIDATION=true
ENABLE_FINGERPRINTING=true
ENABLE_REQUEST_LOGGING=true

# -----------------------------------------------------------------------------
# DEVELOPER/TESTING SETTINGS
# -----------------------------------------------------------------------------
# WARNING: Never enable DEV_SKIP_AUTH in production!
# When enabled, authentication is bypassed and X-Dev-* headers are used
DEV_SKIP_AUTH=false

# Default user/org IDs when DEV_SKIP_AUTH is enabled
DEV_DEFAULT_USER_ID=dev_user_001
DEV_DEFAULT_ORG_ID=dev_org_001

# -----------------------------------------------------------------------------
# OPTIONAL: STRIPE BILLING
# -----------------------------------------------------------------------------
# STRIPE_SECRET_KEY=sk_test_xxxxx
# STRIPE_WEBHOOK_SECRET=whsec_xxxxx
# STRIPE_PRICE_ID_STARTER=price_xxxxx
# STRIPE_PRICE_ID_PRO=price_xxxxx
